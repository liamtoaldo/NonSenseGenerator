@startuml
title System Sequence Diagram for Sentence Generation
actor User
participant System

User -> System: inputs sentence
User -> System: selects template (optional)
User -> System: selects tense (optional)
User -> System: requests to generate sentence
activate System

alt generation successful
    note right of System
        1. Validate input parameters.
        2. Analyze input sentence to identify terms.
        3. If no template is provided, select a random one from the dictionary.
        4. Build sentence by filling template with terms from input sentence and dictionary.
        5. Save new terms from the input sentence to the dictionary.
        6. Save the generated sentence to the history log.
    end note
    System --> User: displays generated sentence

else input is empty or null
    System --> User: displays error for empty input
else template not found
    System --> User: displays error for missing template
else tense not supported
    System --> User: displays error for unsupported tense
else API call failed or timeout
    System --> User: displays error for API failure
else unexpected error
    System --> User: displays generic error message
end

deactivate System

@enduml